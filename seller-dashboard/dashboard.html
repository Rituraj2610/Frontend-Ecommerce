<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Seller Dashboard</title>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

<!-- Add Bootstrap CSS -->
<!-- <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet"> -->

<!-- Add Bootstrap JS -->
<!-- <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.bundle.min.js"></script> -->
 <!-- Bootstrap 5 CSS -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">

<!-- Bootstrap 5 Bundle with Popper -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>

    <!-- Your custom CSS -->
    <!-- <link rel="stylesheet" href="./css/style.css"> -->
    <style>
     /* Main container styles */
/* Main container styles */
body {
    background: linear-gradient(135deg, #f5f7fa 0%, #e8ecf3 100%);
    font-family: 'Segoe UI', Arial, sans-serif;
}

/* Header styles */
header {
    background: linear-gradient(90deg, #4b6cb7 0%, #182848 100%);
    padding: 15px 0;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
}

header .navbar {
    max-width: 1200px;
    margin: 0 auto;
}

header .navbar .navbar-nav .nav-link {
    color: white !important;
    position: relative;
    padding: 8px 15px;
    transition: all 0.3s ease;
}

header .navbar .navbar-nav .nav-link:hover {
    color: #ffd700 !important;
    transform: translateY(-2px);
}

header .navbar .navbar-brand {
    color: #ffd700 !important;
    font-weight: bold;
    font-size: 1.5rem;
    text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.2);
}

/* Container styles */
.container {
    margin-top: 30px;
    max-width: 1200px;
}

/* Product card styles */
.product-card {
    margin-bottom: 25px;
    transition: transform 0.3s ease, box-shadow 0.3s ease;
}

.product-card .card {
    border: none;
    border-radius: 15px;
    background: white;
    box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
    overflow: hidden;
}

.product-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 12px 25px rgba(0, 0, 0, 0.15);
}

/* Carousel styling */
.carousel {
    border-bottom: 1px solid #eee;
}

.carousel-item img {
    width: 100%;
    height: 250px;
    object-fit: cover;
    border-top-left-radius: 15px;
    border-top-right-radius: 15px;
}

.carousel-control-prev,
.carousel-control-next {
    background-color: rgba(0, 0, 0, 0.5);
    width: 35px;
    height: 35px;
    border-radius: 50%;
    top: 50%;
    transform: translateY(-50%);
    opacity: 0;
    transition: opacity 0.3s ease;
}

.carousel:hover .carousel-control-prev,
.carousel:hover .carousel-control-next {
    opacity: 1;
}

.carousel-indicators {
    margin-bottom: 0;
}

.carousel-indicators button {
    width: 8px;
    height: 8px;
    border-radius: 50%;
    margin: 0 4px;
    background-color: rgba(255, 255, 255, 0.7);
}

/* Product details styling */
.card-body {
    padding: 20px;
    background: linear-gradient(to bottom, #ffffff 0%, #f8f9fa 100%);
}

.product-details {
    text-align: left;
}

.product-details h5 {
    color: #2c3e50;
    font-size: 1.25rem;
    margin-bottom: 15px;
    font-weight: 600;
}

.product-details p {
    margin-bottom: 8px;
    color: #5a6774;
}

.product-details p strong {
    color: #3498db;
    font-weight: 600;
}

/* Button styles */
.btn-warning {
    background-color: #f39c12;
    border: none;
    padding: 8px 16px;
    margin-right: 10px;
    transition: all 0.3s ease;
}

.btn-danger {
    background-color: #e74c3c;
    border: none;
    padding: 8px 16px;
    transition: all 0.3s ease;
}

.btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
}

/* Footer styles */
footer {
    background: linear-gradient(90deg, #4b6cb7 0%, #182848 100%);
    color: white;
    padding: 20px;
    text-align: center;
    position: relative;
    bottom: 0;
    width: 100%;
    margin-top: 50px;
    box-shadow: 0 -4px 12px rgba(0, 0, 0, 0.1);
}

/* Responsive layout */
@media (max-width: 768px) {
    .col-md-4 {
        max-width: 100%;
    }
    
    .product-card {
        margin: 15px 0;
    }
}

/* Price tag style */
.product-details p:nth-child(1) strong {
    color: #27ae60;
    font-size: 1.1em;
}

/* Category badge style */
.product-details p:nth-child(2) {
    display: inline-block;
    background: #e8f4fd;
    padding: 4px 12px;
    border-radius: 15px;
    color: #3498db;
    font-size: 0.9em;
}

/* Stock indicator */
.product-details p:nth-child(3) strong {
    color: #e67e22;
}

    </style>
</head>

<body>

    <!-- Header -->
    <header>
        <nav class="navbar navbar-expand-lg navbar-dark">
            <div class="container">
                <a class="navbar-brand" href="#">Seller Dashboard</a>
                <div class="navbar-nav ml-auto">
                    <a class="nav-link" href="add-product.html">Add Product</a>
                    <a class="nav-link" href="orders.html">Orders</a>
                </div>
            </div>
        </nav>
    </header>

    <!-- Add this search section right after the header in your HTML -->
<div class="container mt-4">
    <div class="row mb-4">
        <!-- Name Search -->
        <div class="col-md-4">
            <div class="input-group">
                <input type="text" id="nameSearch" class="form-control" placeholder="Search by name...">
                <button class="btn btn-primary" onclick="searchByName()">Search</button>
            </div>
        </div>
        
        <!-- Category Search -->
        <div class="col-md-4">
            <div class="input-group">
                <select id="categorySearch" class="form-control">
                    <option value="">Select Category</option>
                    <option value="" disabled selected>Select a category</option>
                        <option value="Electronics">Electronics</option>
                        <option value="Clothing">Clothing</option>
                        <option value="Books">Books</option>
                        <option value="Home & Kitchen">Home & Kitchen</option>
                        <option value="Jewelry & Accessories">Jewelry & Accessories</option>
                        <option value="Art & Collectibles">Art & Collectibles</option>
                        <option value="Toys & Games">Toys & Games</option>
                        <option value="Craft Supplies & Tools">Craft Supplies & Tools</option>
                        <option value="Health & Beauty">Health & Beauty</option>
                        <option value="Vintage">Vintage</option>
                        <option value="Music">Music</option>
                        <option value="Stationery">Stationery</option>
                        <option value="Pet Supplies">Pet Supplies</option>
                        <option value="Wedding & Party">Wedding & Party</option>
                        <option value="Sports & Outdoors">Sports & Outdoors</option>
                        <option value="Baby & Toddler">Baby & Toddler</option>
                        <option value="Furniture">Furniture</option>
                        <option value="Garden & Outdoor">Garden & Outdoor</option>
                        <option value="Food & Drink">Food & Drink</option>
                    <!-- Add other categories as needed -->
                </select>
                <button class="btn btn-primary" onclick="searchByCategory()">Search</button>
            </div>
        </div>
        
        <!-- Price Range Search -->
        <div class="col-md-4">
            <div class="input-group">
                <input type="number" id="minPrice" class="form-control" placeholder="Min price">
                <input type="number" id="maxPrice" class="form-control" placeholder="Max price">
                <button class="btn btn-primary" onclick="searchByPrice()">Search</button>
            </div>
        </div>
    </div>
    
    <!-- Clear Search Button -->
    <div class="row mb-4">
        <div class="col-12">
            <button class="btn btn-secondary" onclick="clearSearch()">Clear Search</button>
        </div>
    </div>

    <div id="product-list" class="row">
        <!-- Products will be dynamically inserted here -->
    </div>
</div>

<div id="noProductsMessage" class="text-center mt-4" style="display: none;">
    <h3>No products found</h3>
</div>

    <!-- Main Content -->
    <div class="container mt-4">
        <div id="product-list" class="row">
            <!-- Products will be dynamically inserted here -->
        </div>
    </div>

    <!-- Footer -->
    <footer>
        <p>&copy; 2024 Seller Dashboard. All rights reserved.</p>
    </footer>

    <script>
function editProduct(productId) {
    try {
        // Get products from localStorage
        const products = JSON.parse(localStorage.getItem("products") || "[]");
        
        // Convert productId to string for comparison
        const productToEdit = products.find(p => String(p.id) === String(productId));
        
        console.log("Editing product:", productId);
        console.log("Found product:", productToEdit);
        
        if (productToEdit) {
            // Store only this specific product
            localStorage.setItem("productToEdit", JSON.stringify(productToEdit));
            window.location.href = "edit.html";
        } else {
            console.error("Product not found:", productId);
            alert("Product not found!");
        }
    } catch (error) {
        console.error("Error in editProduct:", error);
        alert("Error preparing product for edit");
    }
}

</script>
<script>
    function deleteProduct(productName) {
    const token = localStorage.getItem("token");

    if (confirm("Are you sure you want to delete this product?")) {
        fetch(`http://localhost:8080/api/v1/seller/product?productName=${encodeURIComponent(productName)}`, {
            method: "DELETE",
            headers: {
                "Authorization": `Bearer ${token}`
            }
        })
        .then(response => {
            if (response.ok) {
                alert("Product deleted successfully!");
                window.location.reload(); // Reload the product list
            } else {
                alert("Failed to delete product.");
            }
        })
        .catch(error => {
            console.error("Error deleting product:", error);
        });
    }
}

</script>
<script>
    async function searchByName() {
    const productName = document.getElementById('nameSearch').value.trim();
    if (!productName) {
        alert('Please enter a product name');
        return;
    }

    const token = localStorage.getItem("token");
    try {
        const response = await fetch(`http://localhost:8080/api/v1/seller/products/name?productName=${encodeURIComponent(productName)}`, {
            method: "GET",
            headers: {
                "Authorization": `Bearer ${token}`
            }
        });

        if (response.ok) {
            const data = await response.json();
            if (data) {
                // Since it returns a single product, wrap it in an array
                displayProducts([data]);
            } else {
                showNoProductsMessage();
            }
        } else {
            throw new Error('Failed to fetch products');
        }
    } catch (error) {
        console.error("Error searching products:", error);
        alert("Error searching products");
    }
}

async function searchByCategory() {
    const category = document.getElementById('categorySearch').value;
    if (!category) {
        alert('Please select a category');
        return;
    }

    const token = localStorage.getItem("token");
    try {
        const response = await fetch(`http://localhost:8080/api/v1/seller/products/category?category=${encodeURIComponent(category)}`, {
            method: "GET",
            headers: {
                "Authorization": `Bearer ${token}`
            }
        });

        if (response.ok) {
            const data = await response.json();
            if (data && data.length > 0) {
                displayProducts(data);
            } else {
                showNoProductsMessage();
            }
        } else {
            throw new Error('Failed to fetch products');
        }
    } catch (error) {
        console.error("Error searching products:", error);
        alert("Error searching products");
    }
}

async function searchByPrice() {
    const minPrice = document.getElementById('minPrice').value;
    const maxPrice = document.getElementById('maxPrice').value;

    if (!minPrice || !maxPrice) {
        alert('Please enter both minimum and maximum prices');
        return;
    }

    if (parseFloat(minPrice) >= parseFloat(maxPrice)) {
        alert('Maximum price must be greater than minimum price');
        return;
    }

    const token = localStorage.getItem("token");
    try {
        const response = await fetch(`http://localhost:8080/api/v1/seller/products/price?min=${minPrice}&max=${maxPrice}`, {
            method: "GET",
            headers: {
                "Authorization": `Bearer ${token}`
            }
        });

        if (response.ok) {
            const data = await response.json();
            if (data && data.length > 0) {
                displayProducts(data);
            } else {
                showNoProductsMessage();
            }
        } else {
            throw new Error('Failed to fetch products');
        }
    } catch (error) {
        console.error("Error searching products:", error);
        alert("Error searching products");
    }
}

function showNoProductsMessage() {
    const productList = document.getElementById('product-list');
    const noProductsMessage = document.getElementById('noProductsMessage');
    productList.innerHTML = '';
    noProductsMessage.style.display = 'block';
}

async function clearSearch() {
    // Clear all search inputs
    document.getElementById('nameSearch').value = '';
    document.getElementById('categorySearch').value = '';
    document.getElementById('minPrice').value = '';
    document.getElementById('maxPrice').value = '';
    
    // Hide no products message
    document.getElementById('noProductsMessage').style.display = 'none';
    
    // Reload all products
    try {
        const response = await fetch("http://localhost:8080/api/v1/seller/get-product", {
            method: "GET",
            headers: {
                "Authorization": `Bearer ${localStorage.getItem("token")}`
            }
        });

        if (response.ok) {
            const products = await response.json();
            displayProducts(products);
        } else {
            throw new Error('Failed to fetch products');
        }
    } catch (error) {
        console.error("Error fetching products:", error);
        alert("Error fetching products");
    }
}

// Add some CSS styles
const styles = `
    .input-group {
        margin-bottom: 10px;
    }
    .input-group input,
    .input-group select {
        border-radius: 4px 0 0 4px;
    }
    .input-group button {
        border-radius: 0 4px 4px 0;
    }
    #noProductsMessage {
        padding: 20px;
        background-color: #f8f9fa;
        border-radius: 8px;
        margin: 20px 0;
    }
`;

// Add styles to document
const styleSheet = document.createElement("style");
styleSheet.innerText = styles;
document.head.appendChild(styleSheet);
</script>
    <script src="./js/dashboard.js">    </script>
</body>

</html>
